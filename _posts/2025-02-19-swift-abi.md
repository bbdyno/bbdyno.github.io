---
title: Swift의 ABI(Application Binary Interface) 안정성
description: Swift의 ABI(Application Binary Interface) 안정성에 대해 설명합니다.
author: bbdyno
date: 2025-02-19 15:10:00 +0900
categories: [Programming Language, Swift]
tags: [Swift, ABI, 프레임워크개발, 모듈안정성, 바이너리호환성, iOS, Swift5]
pin: true
math: true
mermaid: true
---

## 1. ABI(Application Binary Interface)란?
### 1.1 개념 및 정의
ABI(Application Binary Interface)는 컴파일된 바이너리 코드 간의 인터페이스를 정의하는 규칙 집합이다. 이는 운영체제, 하드웨어 아키텍처, 프로그래밍 언어에 따라 달라질 수 있으며, 주로 함수 호출 규약, 데이터 타입의 크기 및 메모리 배치, 심볼 링킹 규칙 등을 포함한다.

### 1.2 API와 ABI의 차이점
많은 개발자가 API(Application Programming Interface)와 ABI를 혼동하는 경우가 많다. API는 소스 코드 레벨에서 함수, 클래스 등의 사용 방법을 정의하는 반면, ABI는 바이너리 코드 레벨에서 프로그램이 실행되는 환경에서의 규약을 정의한다.

- **API**: 소스 코드가 특정 라이브러리 또는 프레임워크를 어떻게 호출하는지를 정의  
- **ABI**: 바이너리 코드가 특정 환경에서 어떻게 실행되는지를 정의  

## 2. Swift의 ABI 안정성이란?
### 2.1 Swift의 ABI 안정성 개념
Swift는 오랜 기간 동안 ABI 안정성을 지원하지 않았다. 하지만 Swift 5부터 Apple은 Swift의 ABI를 안정화하여 iOS, macOS 등의 시스템 라이브러리에 Swift 런타임을 포함했다. 즉, Swift 5 이후부터는 애플 플랫폼에서 Swift의 ABI가 고정되었으며, 이후 버전과의 호환성이 보장된다.

### 2.2 ABI 안정성이 필요한 이유
1. **앱 크기 감소**: Swift 런타임을 OS에 내장하여 각 앱이 자체적으로 Swift 런타임을 포함할 필요가 없어짐  
2. **바이너리 호환성**: Swift 5 이후로 빌드된 바이너리는 이후 Swift 버전에서도 유지됨  
3. **라이브러리 배포 용이**: ABI가 안정화됨으로써 바이너리 프레임워크를 쉽게 배포하고 유지할 수 있음  

## 3. ABI 안정성이 프레임워크 개발과 배포에 미치는 영향
### 3.1 바이너리 프레임워크 배포의 가능성
Swift의 ABI 안정성이 확보되지 않았을 때는 개발자가 바이너리 프레임워크(컴파일된 라이브러리)를 배포할 수 없었다. 하지만 Swift 5부터는 ABI가 안정화됨으로써, 한 번 컴파일된 바이너리 프레임워크를 여러 Swift 버전에서 사용할 수 있다.

### 3.2 ABI 안정성과 모듈 안정성
ABI 안정성은 Swift 런타임이 OS에 내장되도록 하여 바이너리 호환성을 유지하지만, 모듈 안정성(Module Stability)과는 다른 개념이다. 모듈 안정성이 보장되지 않으면, Swift 버전이 다를 경우 소스 코드 재컴파일이 필요하다.

### 3.3 오픈 소스 및 서드파티 라이브러리의 변화
ABI 안정성이 확보되기 전까지는 오픈 소스 및 서드파티 라이브러리 배포 시 소스 코드 형태로 제공하는 것이 일반적이었다. 그러나 Swift 5 이후에는 바이너리 배포가 가능해져, 상용 프레임워크 및 클로즈드 소스 라이브러리 개발이 더욱 용이해졌다.

## 4. Swift ABI 안정성과 관련된 기술적 요소
### 4.1 함수 호출 규약
Swift의 ABI는 함수 호출 시 레지스터 사용 규칙과 스택 할당 방법을 정의한다. 이는 CPU 아키텍처에 따라 다르며, Swift의 경우 LLVM을 통해 최적화된다.

### 4.2 데이터 레이아웃 및 메모리 정렬
Swift의 데이터 타입 크기와 정렬 방식이 일정하게 유지되어야 ABI 안정성이 유지될 수 있다. 따라서 Swift 5 이후로는 표준 데이터 타입의 크기와 정렬 방식이 변경되지 않는다.

### 4.3 심볼 링킹 및 다이나믹 라이브러리 로딩
Swift 5 이후부터는 Apple 플랫폼에서 Swift 런타임이 시스템 라이브러리로 포함되므로, 앱이 실행될 때 별도로 Swift 라이브러리를 로드할 필요가 없다.

## 5. ABI 안정성과 개발자가 고려해야 할 사항
### 5.1 프레임워크 개발 시의 유의점
1. Swift의 모듈 안정성은 완전하지 않으므로, 라이브러리 배포 시 **Swift Interface 파일**을 활용해야 한다.  
2. Xcode에서 클라이언트가 사용하는 Swift 버전을 고려해야 한다.  
3. API 변경 시 ABI 안정성을 유지하도록 주의해야 한다.  

### 5.2 Swift ABI 안정성 활용 사례
- **Apple의 시스템 프레임워크 (Foundation, UIKit 등)에서 Swift 런타임 사용**  
- **Firebase, Realm 등의 서드파티 라이브러리에서 바이너리 배포 지원**  
- **기업 내부에서 공유하는 Swift 기반 라이브러리 배포 간소화**  

## 6. 결론
Swift의 ABI 안정성은 개발자에게 매우 중요한 개념이다. Swift 5 이후로 Apple 플랫폼에서는 Swift 런타임이 OS에 포함되었으며, 이는 앱 크기 감소 및 바이너리 호환성을 제공한다. 하지만 모듈 안정성은 별개의 문제이므로, 라이브러리 개발자는 ABI 안정성과 함께 모듈 안정성까지 고려해야 한다.
